# Shot Chart


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

``` python
#hide
from shot_chart.core import *
```

This file will become your README and also the index of your
documentation.

## Install

`pip install shot_chart`

## How to use

We first create a pandas dataframe from the source data.

``` python
shots_2019 = make_df(untar_data(URLs.SHOTS_2019))
```

## Listing teams for the season

``` python
list_teams(shots_2019)
```

    0        New Orleans
    2            Toronto
    203        LA Lakers
    204      LA Clippers
    369          Houston
    371       Washington
    563             Utah
    724          Detroit
    896        Charlotte
    897       Sacramento
    1076       Minnesota
    1077    Philadelphia
    1248        New York
    1250         Orlando
    1418        Oklahoma
    1419        Portland
    1587         Phoenix
    1588    Golden State
    2117          Dallas
    2307         Memphis
    2309         Chicago
    2649          Denver
    3000        Brooklyn
    3874       Milwaukee
    4562     San Antonio
    5436         Indiana
    5606          Boston
    5951         Atlanta
    6863           Miami
    6864       Cleveland
    Name: team, dtype: object

## Listing players who took at least 1 shot for a particular team

``` python
list_team_players(shots_2019, 'Portland')
```

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

|     | shots_by         | count |
|-----|------------------|-------|
| 2   | CJ McCollum      | 1356  |
| 5   | Damian Lillard   | 1344  |
| 4   | Carmelo Anthony  | 781   |
| 7   | Hassan Whiteside | 702   |
| 0   | Anfernee Simons  | 532   |
| 6   | Gary Trent       | 440   |
| 10  | Kent Bazemore    | 322   |
| 11  | Mario Hezonja    | 217   |
| 14  | Rodney Hood      | 172   |
| 16  | Trevor Ariza     | 159   |
| 13  | Nassir Little    | 151   |
| 15  | Skal LabissiÃ¨re  | 147   |
| 1   | Anthony Tolliver | 117   |
| 9   | Jusuf NurkiÄ‡     | 109   |
| 18  | Zach Collins     | 68    |
| 3   | Caleb Swanigan   | 43    |
| 8   | Jaylen Hoard     | 32    |
| 17  | Wenyen Gabriel   | 31    |
| 12  | Moses Brown      | 10    |

</div>

## Plotting team shot distribution

``` python
houston = TeamShots(shots_2019,"Houston")
```

``` python
houston.plot_shots()
```

    ValueError: Please open the URL for reading and pass the result to Pillow, e.g. with ``np.array(PIL.Image.open(urllib.request.urlopen(url)))``.
    [31m---------------------------------------------------------------------------[39m
    [31mValueError[39m                                Traceback (most recent call last)
    [36mCell[39m[36m [39m[32mIn[6][39m[32m, line 1[39m
    [32m----> [39m[32m1[39m [43mhouston[49m[43m.[49m[43mplot_shots[49m[43m([49m[43m)[49m

    [36mFile [39m[32m~/DEV/shot_chart/shot_chart/core.py:325[39m, in [36mShots.plot_shots[39m[34m(self, date_range, **kwargs)[39m
    [32m    323[39m     copy_df.index = pd.DatetimeIndex(copy_df.Timestamp)
    [32m    324[39m     shots_df = copy_df.loc[[38;5;28mstr[39m([38;5;28mstr[39m(date_range[[32m0[39m][[32m0[39m])+[33m"[39m[33m-[39m[33m"[39m+[38;5;28mstr[39m(date_range[[32m0[39m][[32m1[39m])+[33m"[39m[33m-[39m[33m"[39m+[38;5;28mstr[39m(date_range[[32m0[39m][[32m2[39m])):[38;5;28mstr[39m([38;5;28mstr[39m(date_range[[32m1[39m][[32m0[39m])+[33m"[39m[33m-[39m[33m"[39m+[38;5;28mstr[39m(date_range[[32m1[39m][[32m1[39m])+[33m"[39m[33m-[39m[33m"[39m+[38;5;28mstr[39m(date_range[[32m1[39m][[32m2[39m]))]
    [32m--> [39m[32m325[39m [38;5;28;43mself[39;49m[43m.[49m[43m__plot_shot_chart[49m[43m([49m[43mshots_df[49m[43m,[49m[43m [49m[43m*[49m[43m*[49m[43mkwargs[49m[43m)[49m
    [32m    326[39m [38;5;28mself[39m.__plot_hist_volume(shots_df, [38;5;28mself[39m.__calculate_metric([38;5;28mself[39m.dataframe, [33m"[39m[33mfg[39m[33m"[39m), [38;5;28mself[39m.__calculate_metric([38;5;28mself[39m.dataframe, [33m"[39m[33mefg[39m[33m"[39m))
    [32m    327[39m plt.show()

    [36mFile [39m[32m~/DEV/shot_chart/shot_chart/core.py:248[39m, in [36mShots.__plot_shot_chart[39m[34m(self, dataframe, metric, attempt, distance_limit)[39m
    [32m    246[39m ax = plt.subplot([32m1[39m, [32m2[39m, [32m1[39m)
    [32m    247[39m plt.title([33m"[39m[33mShot chart[39m[33m"[39m)
    [32m--> [39m[32m248[39m img = [43mplt[49m[43m.[49m[43mimread[49m[43m([49m[33;43m"[39;49m[33;43mhttp://d2p3bygnnzw9w3.cloudfront.net/req/1/images/bbr/nbahalfcourt.png[39;49m[33;43m"[39;49m[43m)[49m
    [32m    249[39m implot = plt.imshow(img, extent=[[32m0[39m,[32m500[39m,[32m0[39m,[32m472[39m])
    [32m    250[39m [38;5;28;01mif[39;00m attempt == [33m"[39m[33m2-pointer[39m[33m"[39m:

    [36mFile [39m[32m~/anaconda3/envs/clean_shot_chart/lib/python3.13/site-packages/matplotlib/pyplot.py:2614[39m, in [36mimread[39m[34m(fname, format)[39m
    [32m   2610[39m [38;5;129m@_copy_docstring_and_deprecators[39m(matplotlib.image.imread)
    [32m   2611[39m [38;5;28;01mdef[39;00m[38;5;250m [39m[34mimread[39m(
    [32m   2612[39m         fname: [38;5;28mstr[39m | pathlib.Path | BinaryIO, [38;5;28mformat[39m: [38;5;28mstr[39m | [38;5;28;01mNone[39;00m = [38;5;28;01mNone[39;00m
    [32m   2613[39m ) -> np.ndarray:
    [32m-> [39m[32m2614[39m     [38;5;28;01mreturn[39;00m [43mmatplotlib[49m[43m.[49m[43mimage[49m[43m.[49m[43mimread[49m[43m([49m[43mfname[49m[43m,[49m[43m [49m[38;5;28;43mformat[39;49m[43m)[49m

    [36mFile [39m[32m~/anaconda3/envs/clean_shot_chart/lib/python3.13/site-packages/matplotlib/image.py:1515[39m, in [36mimread[39m[34m(fname, format)[39m
    [32m   1511[39m img_open = (
    [32m   1512[39m     PIL.PngImagePlugin.PngImageFile [38;5;28;01mif[39;00m ext == [33m'[39m[33mpng[39m[33m'[39m [38;5;28;01melse[39;00m PIL.Image.open)
    [32m   1513[39m [38;5;28;01mif[39;00m [38;5;28misinstance[39m(fname, [38;5;28mstr[39m) [38;5;129;01mand[39;00m [38;5;28mlen[39m(parse.urlparse(fname).scheme) > [32m1[39m:
    [32m   1514[39m     [38;5;66;03m# Pillow doesn't handle URLs directly.[39;00m
    [32m-> [39m[32m1515[39m     [38;5;28;01mraise[39;00m [38;5;167;01mValueError[39;00m(
    [32m   1516[39m         [33m"[39m[33mPlease open the URL for reading and pass the [39m[33m"[39m
    [32m   1517[39m         [33m"[39m[33mresult to Pillow, e.g. with [39m[33m"[39m
    [32m   1518[39m         [33m"[39m[33m``np.array(PIL.Image.open(urllib.request.urlopen(url)))``.[39m[33m"[39m
    [32m   1519[39m         )
    [32m   1520[39m [38;5;28;01mwith[39;00m img_open(fname) [38;5;28;01mas[39;00m image:
    [32m   1521[39m     [38;5;28;01mreturn[39;00m (_pil_png_to_float_array(image)
    [32m   1522[39m             [38;5;28;01mif[39;00m [38;5;28misinstance[39m(image, PIL.PngImagePlugin.PngImageFile) [38;5;28;01melse[39;00m
    [32m   1523[39m             pil_to_array(image))

    [31mValueError[39m: Please open the URL for reading and pass the result to Pillow, e.g. with ``np.array(PIL.Image.open(urllib.request.urlopen(url)))``.

![](index_files/figure-commonmark/cell-7-output-2.png)

``` python
houston.plot_shots(date_range=((2020,1,3), (2020,1,11)))
```

![](index_files/figure-commonmark/cell-8-output-1.png)

Please check the extra options when using the plotting functions

``` python
portland_20191125 = TeamShots(shots_2019,"Portland")
```

``` python
portland_20191125.list_game_ids(2019,11,25)
```

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
&#10;    .dataframe tbody tr th {
        vertical-align: top;
    }
&#10;    .dataframe thead th {
        text-align: right;
    }
</style>

|       | game_id      | winner   | loser   |
|-------|--------------|----------|---------|
| 45560 | 201911250CHI | Portland | Chicago |

</div>

``` python
portland_20191125.plot_shots("201911250CHI")
```

![](index_files/figure-commonmark/cell-11-output-1.png)

## Plotting player shot distribution

``` python
player_shots = PlayerShots(shots_2019,"Anthony Davis")
```

``` python
player_shots.plot_shots()
```

![](index_files/figure-commonmark/cell-13-output-1.png)

``` python
dlo = PlayerShots(shots_2019,"D'Angelo Russell")
```

``` python
dlo.plot_shots()
```

![](index_files/figure-commonmark/cell-15-output-1.png)

``` python
dlo.plot_shots(distance_limit=(16,26),attempt="2-pointer")
```

![](index_files/figure-commonmark/cell-16-output-1.png)

``` python
dlo.plot_effective(most_or_least="most")
```

![](index_files/figure-commonmark/cell-17-output-1.png)

``` python
dlo.plot_effective(most_or_least="most",exclude=["0ft"])
```

![](index_files/figure-commonmark/cell-18-output-1.png)

``` python
dlo.plot_effective(most_or_least="most",min_shots="auto",exclude=['2ft'])
```

![](index_files/figure-commonmark/cell-19-output-1.png)

``` python
dlo.plot_effective(most_or_least="least")
```

![](index_files/figure-commonmark/cell-20-output-1.png)

``` python
dlo.plot_effective(most_or_least="least",min_shots="auto")
```

![](index_files/figure-commonmark/cell-21-output-1.png)
